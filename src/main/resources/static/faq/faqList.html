<!DOCTYPE html>
<html>
<head>
    <title>FAQ 목록</title>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            fn_init();
        });
        function fn_init() {
            fn_getFaqList(); // FAQ 목록 조회
            fn_setEvent();
        }

        function fn_setEvent() {
            $('.faq-item').click(function () {
                var faqId = $(this).data('faq-id');
                window.location.href = 'faqInfo.html?faqId=' + faqId;
            });

            $('#faqCreateButton').click(function () {
                window.location.href = 'faqCreateForm.html';
            });
        }

        /**
         * FAQ 목록 조회
         */
        function fn_getFaqList() {
            // JSON 데이터를 가져오는 비동기 요청
            $.ajax({
                url: '/api/v1/faqs',
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    console.log("data : " + JSON.stringify(data));
                    var faqs = data.faqs;

                    for (var i = 0; i < faqs.length; i++) {
                        var faq = faqs[i];
                        var faqItem = '<tr class="faq-item" data-faq-id="' + faq.id + '">' +
                            '<td>' + faq.id + '</td>' +
                            '<td>' + faq.title + '</td>' +
                            '</tr>';
                        $('#faqList').append(faqItem);
                    }

                    fn_setEvent();
                },
                error: function () {
                    console.log('데이터를 불러오는데 실패했습니다.');
                }
            });
        }
    </script>
</head>
<body>
<h1 id="boardName">FAQ 목록</h1>
<table border="1">
    <tr>
        <th>No</th>
        <th>제목</th>
    </tr>
    <tbody id="faqList"></tbody>
</table>
<button id="faqCreateButton">FAQ 생성</button> <!-- 글 생성 버튼 추가 -->

</body>
</html>
