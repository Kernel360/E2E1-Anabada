<!DOCTYPE html>
<html>
<head>
  <title>교환 목록</title>
  <meta charset="utf-8">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      fn_init();
    });
    function fn_init() {
      fn_getMemberList(); // 교환 목록 조회
      fn_setEvent();
    }
    function fn_setEvent() {
      // "거래 요청" 버튼을 초기화
      $('#memberCreateButton').click(function () {
        window.location.href = 'tradeCreateForm.html'; // 클릭시 이동할 페이지 지정
      });

      $('.member-item').click(function () {
        var memberId = $(this).data('member-id');
        window.location.href = 'memberInfo.html?memberNo='+memberId;
      });
    }
    /**
     * 교환목록 조회
     */
    function fn_getMemberList() {
      // JSON 데이터를 가져오는 비동기 요청
      $.ajax({
        url: '/api/v1/members/',
        method: 'GET',
        dataType: 'json',
        success: function (data) {
          var members = data.members;

          for (var i = 0; i < members.length; i++) {
            var member = members[i];
            var memberItem = '<tr class="member-item" data-member-id="' + member.memberId + '">' +
                    '<td>' + member.email + '</td>' +
                    '<td>' + member.nickname + '</td>' +
                    '<td>' + member.gender + '</td>' +
                    '<td>' + member.birth + '</td>' +
                    '</tr>';
            $('#memberList').append(memberItem);
          }

          fn_setEvent();
        },
        error: function () {
        }
      });
    }
  </script>
</head>
<body>
<h1 id="boardName">회원 목록</h1>
<table border="1">
  <tr>
    <th>이메일</th>
    <th>닉네임</th>
    <th>성별</th>
    <th>생년월일</th>
  </tr>
  <tbody id="memberList"></tbody>
</table>
</body>
</html>